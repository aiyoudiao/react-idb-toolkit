import{r as l,j as e,I as i,B as n}from"./index-B-TpPWaL.js";import{I as C,C as D}from"./card-C_3OSeQy.js";let r=null;async function B(s){return r||(r=new C(s),await r.init()),r}function k(){if(!r)throw new Error("IndexedDB is not ready yet. Please call initIndexedDB() first.");return r}let a=null;const K=()=>{const[s,o]=l.useState("myKey"),[d,x]=l.useState("Hello IndexedDB"),[h,u]=l.useState(),[m,j]=l.useState([]),[y,p]=l.useState([]),[c,f]=l.useState(!0);l.useEffect(()=>{B({dbName:"storybook-db",storeNames:["demoStore"]}).then(()=>{a=k(),f(!1)})},[]);const g=async()=>{await a.setItem("demoStore",s,d),alert(`âœ… Set "${s}" = "${d}"`)},S=async()=>{const t=await a.getItem("demoStore",s);u(t)},I=async()=>{await a.deleteItem("demoStore",s),alert(`ğŸ—‘ï¸ Deleted "${s}"`)},N=async()=>{await a.clear("demoStore"),alert("ğŸ§¹ Cleared all entries")},w=async()=>{const t=await a.keys("demoStore");j(t)},v=async()=>{const t=await a.getAll("demoStore");p(t)};return c?e.jsx("p",{className:"text-center",children:"Loading IndexedDB..."}):e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:e.jsxs(D,{className:"p-6 space-y-6 max-w-xl mx-auto bg-white rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-center",children:"ğŸ§ª indexedDBUtils Playground"}),e.jsxs("p",{className:"text-center",children:["Status: ",e.jsx("strong",{children:c?"Loading...":"Ready âœ…"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{placeholder:"Key",value:s,onChange:t=>o(t.target.value)}),e.jsx(i,{placeholder:"Value",value:d,onChange:t=>x(t.target.value)}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(n,{onClick:g,children:"ğŸ’¾ Set Item"}),e.jsx(n,{onClick:S,children:"ğŸ” Get Item"}),e.jsx(n,{onClick:I,children:"âŒ Delete Item"}),e.jsx(n,{variant:"destructive",onClick:N,children:"ğŸ§¹ Clear Store"})]})]}),e.jsxs("div",{className:"space-x-2 flex",children:[e.jsx(n,{onClick:v,children:"ğŸ“¦ Get All Values"}),e.jsx(n,{onClick:w,children:"ğŸ—‚ï¸ Get All Keys"})]}),e.jsxs("div",{className:"space-y-2 mt-6",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Fetched value:"})," ",e.jsx("span",{className:"text-blue-700",children:h??"(not found)"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"All keys:"})," ",e.jsx("code",{className:"text-sm",children:JSON.stringify(m)})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"All values:"})," ",e.jsx("code",{className:"text-sm",children:JSON.stringify(y)})]})]})]})})};export{K as default};
