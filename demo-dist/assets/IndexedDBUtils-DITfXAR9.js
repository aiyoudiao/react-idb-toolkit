import{r as a,j as e,I as i,B as n}from"./index-CP7TzrjQ.js";import{I as C,C as D}from"./card-Ath_W0LP.js";let r=null;async function B(l){return r||(r=new C(l),await r.init()),r}function k(){if(!r)throw new Error("IndexedDB is not ready yet. Please call initIndexedDB() first.");return r}let t=null;const G=()=>{const[l,o]=a.useState("myKey"),[c,x]=a.useState("Hello IndexedDB"),[h,u]=a.useState(),[m,j]=a.useState([]),[y,p]=a.useState([]),[d,f]=a.useState(!0);a.useEffect(()=>{B({dbName:"storybook-db",storeNames:["demoStore"]}).then(()=>{t=k(),f(!1)})},[]);const g=async()=>{await(t==null?void 0:t.setItem("demoStore",l,c)),alert(`✅ Set "${l}" = "${c}"`)},S=async()=>{const s=await(t==null?void 0:t.getItem("demoStore",l));u(s)},I=async()=>{await(t==null?void 0:t.deleteItem("demoStore",l)),alert(`🗑️ Deleted "${l}"`)},N=async()=>{await(t==null?void 0:t.clear("demoStore")),alert("🧹 Cleared all entries")},w=async()=>{const s=await(t==null?void 0:t.keys("demoStore"));j(s)},v=async()=>{const s=await(t==null?void 0:t.getAll("demoStore"));p(s)};return d?e.jsx("p",{className:"text-center",children:"Loading IndexedDB..."}):e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:e.jsxs(D,{className:"p-6 space-y-6 max-w-xl mx-auto bg-white rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-center",children:"🧪 indexedDBUtils Playground"}),e.jsxs("p",{className:"text-center",children:["Status: ",e.jsx("strong",{children:d?"Loading...":"Ready ✅"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{placeholder:"Key",value:l,onChange:s=>o(s.target.value)}),e.jsx(i,{placeholder:"Value",value:c,onChange:s=>x(s.target.value)}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(n,{onClick:g,children:"💾 Set Item"}),e.jsx(n,{onClick:S,children:"🔍 Get Item"}),e.jsx(n,{onClick:I,children:"❌ Delete Item"}),e.jsx(n,{variant:"destructive",onClick:N,children:"🧹 Clear Store"})]})]}),e.jsxs("div",{className:"space-x-2 flex",children:[e.jsx(n,{onClick:v,children:"📦 Get All Values"}),e.jsx(n,{onClick:w,children:"🗂️ Get All Keys"})]}),e.jsxs("div",{className:"space-y-2 mt-6",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Fetched value:"})," ",e.jsx("span",{className:"text-blue-700",children:h??"(not found)"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"All keys:"})," ",e.jsx("code",{className:"text-sm",children:JSON.stringify(m)})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"All values:"})," ",e.jsx("code",{className:"text-sm",children:JSON.stringify(y)})]})]})]})})};export{G as default};
